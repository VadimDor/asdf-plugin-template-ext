#!/usr/bin/env bash

set -ueo pipefail
shopt -s dotglob

# shellcheck source=SCRIPTDIR/../lib/utils.bash
source "$(dirname "${BASH_SOURCE[0]}")/../lib/utils.bash"

<YOUR TOOL ELC>_init "download"
<YOUR TOOL ELC>_init_traps

# No exec {fd} redirection with bash 3
# shellcheck disable=SC2001
BASH_MAJOR_VERSION="$(echo "$BASH_VERSION" | sed 's/\..*//')"
if [ "$BASH_MAJOR_VERSION" -ge 4 ]; then
  exec {<YOUR TOOL EUC>_STDOUT}<&1 {<YOUR TOOL EUC>_STDERR}<&2
  {
    <YOUR TOOL ELC>_download
  } 1>>"$(<YOUR TOOL ELC>_log)" 2>>"$(<YOUR TOOL ELC>_log)"
else
  touch "$(<YOUR TOOL ELC>_log)"
  <YOUR TOOL ELC>_download
fi
